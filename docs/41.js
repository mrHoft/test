"use strict";(self.webpackChunknonograms=self.webpackChunknonograms||[]).push([[41],{8041:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var o=n(1301),c=n(5459),a=n(4770),s=n(3442);const m=new a.Sound,d=new s.Store;function l(e,t,n){n||(m.sound.muted=!1),t&&(m.sound.volume=Number(t)),m.sound.volume>.6?e.className="volume__sound_icon volume-3":m.sound.volume>.3?e.className="volume__sound_icon volume-2":m.sound.volume>0?e.className="volume__sound_icon volume-1":e.className="volume__sound_icon volume-off"}function u(){m.play("dot"),d.set("sound",{volume:m.sound.volume,muted:!1})}function r(){d.set("music",{volume:m.music.volume,muted:!1})}const i=new a.Sound;let _=null,v=0;const p=e=>{if(100===e&&_.textContent.includes("loading")&&(_.textContent=""),_&&!i._playing&&!i.music.muted){v+=1,v>3&&(v=1);const e=".".repeat(v-1);_.textContent=`${e}loading${e}`}},g=e=>{_&&(_.textContent=e)},E=()=>{document.querySelector(".volume__music_icon").classList.add("volume-off"),_.textContent=""};var h=n(7803);const N=new h.Z;function f(){N.mode=this.value}var y=n(9114),b=n(651),k=n(6012);const L=()=>{const e=(new h.Z).lang,t=document.createElement("div");t.className="modal__about hidden";const n=document.createElement("div");n.className="modal__inner";const o=document.createElement("div");o.className="modal__left";const c=document.createElement("div");c.className="modal__right";const a=document.createElement("div");a.className="modal__close hex-btn";const s=document.createElement("div"),m=document.createElement("div");m.className="modal__close_icon",s.append(m),a.append(s),a.addEventListener("click",(()=>t.classList.add("hidden")));const d=document.createElement("h2");d.className="modal__title",d.textContent=k[e].aboutTitle;const l=document.createElement("div");l.className="modal__scroll_wrap";const u=document.createElement("div");u.className="modal__about_descr scrolled",l.append(u),k[e].description.forEach(((e,t)=>{const n=document.createElement("article"),o=document.createElement("div"),c=document.createElement("div");c.className=`modal__about_img0${t+1}`,e.forEach((e=>o.append(function(e){if(e.startsWith("### ")){const t=document.createElement("h3");return t.textContent=e.substring(4),t}const t=function(e){const t=[];return function e(n){const o=n.match(/\[([\w\s\d]+)\]\((https?:\/\/[\w\d./?=#@]+)\)/);if(o){const c=o[1],a=o[2];t.push({text:n.slice(0,o.index),id:c,url:a}),e(n.substring(o.index+c.length+a.length+4))}else t.length&&t.push({text:n})}(e),t.length?t:null}(e);if(t){const e=document.createElement("p");return t.forEach((({text:t,id:n,url:o})=>{if(e.append(document.createTextNode(t)),n){const t=document.createElement("a");t.href=o,t.textContent=n,e.append(t)}})),e}const n=document.createElement("p");return n.textContent=e,n}(e)))),n.append(o,c),u.append(n)}));const r=document.createElement("div");r.className="button",r.textContent="OK",r.addEventListener("click",(()=>t.classList.add("hidden"))),n.append(o,c,a,d,l,r);const i=document.createElement("div");return i.className="modal__bott",t.append(i,n),t.addEventListener("click",(e=>{e.target===e.currentTarget&&e.target.classList.add("hidden")})),t},x=()=>{const e=(new o.Q).name;document.querySelectorAll(".modal__close_icon").forEach((t=>t.classList.toggle("invert","dark"===e))),document.querySelector(".game__reset_icon").classList.toggle("invert","dark"===e),document.querySelector(".game__save_icon").classList.toggle("invert","dark"===e),document.querySelector(".rss__logo").classList.toggle("invert","dark"!==e),document.querySelector(".volume__sound_icon").classList.toggle("invert","dark"!==e),document.querySelector(".volume__music_icon").classList.toggle("invert","dark"!==e),document.querySelector(".bg").classList.toggle("bright","dark"!==e),document.querySelector(".icon_new").classList.toggle("invert","dark"===e),document.querySelector(".icon_random").classList.toggle("invert","dark"===e),document.querySelector(".icon_load").classList.toggle("invert","dark"===e),document.querySelector(".icon_editor").classList.toggle("invert","dark"===e),document.querySelector(".icon_records").classList.toggle("invert","dark"===e),document.querySelector(".icon_about").classList.toggle("invert","dark"===e)},C=new o.Q,S=new s.Store,w=new h.Z;let q=2;function P(){const e=document.createElement("main");e.className="main";const t=document.createElement("div");t.className="base",t.append(function(){const e=document.createElement("div");e.className="game hidden";const t=document.createElement("canvas");t.className="game__field",t.width=c.I.size,t.height=c.I.size,t.textContent="Game field";const n=document.createElement("canvas");n.className="game__hover",n.width=c.I.size,n.height=c.I.size;const o=document.createElement("div");o.className="game__reset hex-btn";const a=document.createElement("div"),s=document.createElement("div");s.className="game__reset_icon",a.append(s),o.append(a);const m=document.createElement("div");m.className="game__solution hex-btn";const d=document.createElement("div");d.textContent="!",m.append(d);const l=document.createElement("div");l.className="game__save hex-btn";const u=document.createElement("div"),r=document.createElement("div");r.className="game__save_icon",u.append(r),l.append(u);const i=document.createElement("div");i.className="game__header";const _=document.createElement("p");_.className="game__header_text hidden",i.append(_,function(){const e=document.createElement("div");return e.className="editor__mode mode hidden",c.I.modes.forEach(((t,n)=>{const o=document.createElement("input");o.className="editor__mode_select mode-select",o.type="radio",o.value=n,o.name="e_mode",o.id=`e_mode${n}`,o.addEventListener("change",f);const c=document.createElement("label");c.textContent=t,c.htmlFor=`e_mode${n}`,e.append(o,c)})),e}());const v=document.createElement("div");v.className="game__left";const p=document.createElement("div");p.className="game__right";const g=document.createElement("div");g.className="game__top";const E=document.createElement("div");return E.className="game__bott",e.append(i,t,n,v,p,g,E,o,m,l,function(){const e=document.createElement("div");e.className="game__stats";const t=document.createElement("span");t.className="stats__turns",t.textContent="0/0";const n=document.createElement("span");n.className="stats__pos",n.textContent="0:0";const o=document.createElement("div");o.className="stats__progress";const c=document.createElement("p");c.className="stats__timer",c.textContent="00:00";const a=document.createElement("div");a.className="stats__progress_wrap";const s=document.createElement("div");return s.className="stats__progress_bar",a.append(s),o.append(c,a),e.append(t,o,n),e}(),function(){const e=w.lang,t=document.createElement("form");t.className="editor__save_form hidden";const n=document.createElement("div");n.className="editor__save_name";const o=document.createElement("input");o.name="name",o.type="text",o.autocomplete="off",o.placeholder="",o.className="editor__save_name-text";const c=document.createElement("label");c.className="editor__save_name-label",c.textContent=k[e].puzzleName,n.append(o,c);const a=document.createElement("button");a.type="submit",a.className="editor__save_btn button",a.textContent=k[e].save;const s=document.createElement("div");return s.className="editor__save_message hidden",t.append(n,a,s),t}()),e}());const n=document.createElement("div");return n.className="bg",e.append(n,(0,y.wp)(),function(){const e=document.createElement("div");e.className="player__audio";const t=document.createElement("p");return t.className="player__title",_=t,i.readyCallback=p,i.startPlayCallback=g,i.exceptionCallback=E,e.append(function(){const e=d.get("sound"),t=d.get("music");e&&(Number.isFinite(e.volume)&&(m.sound.volume=e.volume),"boolean"==typeof e.muted&&(m.sound.muted=e.muted)),t&&(Number.isFinite(t.volume)&&(m.music.volume=t.volume),"boolean"==typeof t.muted&&(m.music.muted=t.muted));const n=document.createElement("div");n.className="volume";const o=document.createElement("div");o.className="volume__sound";const c=document.createElement("div");c.className="volume__sound_icon";const a=document.createElement("input");a.className="volume__range",a.type="range",a.step="0.05",a.value=m.sound.volume,a.max="1",a.addEventListener("input",(()=>l(c,a.value))),a.addEventListener("mouseup",u),c.addEventListener("click",(()=>{return e=c,m.sound.muted=!m.sound.muted,m.sound.muted?e.className="volume__sound_icon volume-off":l(e),void d.set("sound.muted",m.sound.muted);var e})),o.append(c,a);const s=document.createElement("div");s.className="volume__music";const i=document.createElement("div");i.className="volume__music_icon";const _=document.createElement("input");return _.className="volume__range",_.type="range",_.step="0.05",_.value=m.music.volume,_.max="1",_.addEventListener("input",(()=>{return e=i,t=_.value,m.music.muted&&(m.musicMuted=!1),t&&(m.musicVolume=Number(t)),void e.classList.toggle("volume-off",0===m.music.volume);var e,t})),_.addEventListener("mouseup",r),i.addEventListener("click",(()=>{return e=i,m.musicMuted=!m.music.muted,e.classList.toggle("volume-off",m.music.muted),void d.set("music.muted",m.music.muted);var e})),s.append(i,_),n.append(o,s),l(c,m.sound.volume,!0),m.sound.muted&&(c.className="volume__sound_icon volume-off"),i.classList.toggle("volume-off",0===m.music.volume||m.music.muted),n}(),_),e}(),t,function(){const e=document.createElement("div");e.className="chars";const t=document.createElement("div");t.className="chars__shrike";const n=document.createElement("div");n.className="chars__bulldog";const o=document.createElement("blockquote");o.className="speech__shrike hidden",t.append(o);const c=document.createElement("blockquote");return c.className="speech__bulldog hidden",n.append(c),e.append(t,n),e}()),e}function T(e,t=(()=>{})){const n=document.createElement(e);n.className=e;const o=new XMLHttpRequest;return o.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(n.innerHTML=this.responseText,q-=1,q<=0&&t()),404===this.status&&(n.innerHTML="Page not found."))},o.open("GET",`./template/${e}.tmpl`,!0),o.send(),n}async function $(){const e=S.get("lang")??"en";w.lang=e,console.log("lanuage:",e);const t=S.get("theme");document.body.classList.toggle("theme__dark","dark"===t);const n=e=>{C.color00=getComputedStyle(document.body).getPropertyValue("--color00"),C.color50=getComputedStyle(document.body).getPropertyValue("--color50"),C.color80=getComputedStyle(document.body).getPropertyValue("--color80"),C.color90=getComputedStyle(document.body).getPropertyValue("--color90"),C.color100=getComputedStyle(document.body).getPropertyValue("--color100"),C.name=e};return new Promise((o=>{const c=()=>{(()=>{const e=document.querySelector(".theme__switcher");e.checked="dark"===t,n(t),e.addEventListener("change",(e=>{e.preventDefault();const t=e.currentTarget.checked;document.body.classList.toggle("theme__dark",t),n(t?"dark":"light"),S.set("theme",t?"dark":"light"),x()}))})(),x(),(()=>{const t=document.querySelector(".language__icon"),n=document.querySelector(".language__select");n.value=e,t.className=`language__icon ${e}`,n.addEventListener("change",(e=>{e.preventDefault(),S.set("lang",e.target.value),location.replace(location.href)}))})(),o()};document.body.append(T("header",c),P(),T("footer",c),(0,y.kN)(),(0,y.k3)(),(0,b.B)(),L()),(0,y.rG)()}))}}}]);